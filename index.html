<!DOCTYPE html>
<meta charset="utf-8">
<link rel="stylesheet" href="style.css">

<body>
  <div class="title">
    your vote counts
  </div>

  <div class="subtitle">
    Are you voting this midterm election? Upload an image to this collaborative photomosaic and help remind everyone that their vote matters.
  </div>

  <!-- https://script.google.com/macros/s/AKfycbzMi5e-JvqNAQc78M06Iw1E2Gy1jzGl4A7OQXfRZuxpa01Vmxxa/exec -->
  <form name="submit-to-google-sheet" class="form">
    <input name="name" placeholder="your name" type="text" maxlength="300" id="name"/>
    <input name="email" placeholder="your email" type="text" maxlength="300" id="email"/>
    <input type="file" name="image" accept="image/*" id="add-photo">
    <button type="submit" id="submit-form"> Submit </button>
  </form>

  <div class="logos">
    <img src="https://resize.pubpub.org/fit-in/0x200/c7cfyyz6/31507218538557.png" alt="viral-communications" width="90%">
  </div>

  <canvas width="1500" height="800"></canvas>

</body>


<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="jquery.serialize-object.min.js"></script>
<script>
  var $form = $('form'),
    url = 'https://script.google.com/macros/s/AKfycbzMi5e-JvqNAQc78M06Iw1E2Gy1jzGl4A7OQXfRZuxpa01Vmxxa/exec'

$('#submit-form').on('click', function(e) {
  e.preventDefault();
  var jqxhr = $.ajax({
    url: url,
    method: "GET",
    mode: "cors",
    dataType: "json",
    data: $form.serializeObject(),
    headers: {
        "Content-Type": "application/json; charset=utf-8",
        'Access-Control-Allow-Headers': '*',
        'Access-Control-Allow-Credentials': true,
        'Access-Control-Allow-Methods': 'GET,PUT,POST,DELETE',
        "Access-Control-Allow-Origin" : "*"
    }
  }).success(
    // do something
    console.log('success')
  );
})
</script>
<script type="module" src="script.js"></script>
